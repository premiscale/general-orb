description: Run pylint
executor: python-3-10
resource_class: << parameters.resource-class >>
parameters:
  resource-class:
    type: enum
    enum:
      - small
      - medium
      - large
      - xlarge
      - 2xlarge
    default: small
    description: Resource class to run as.
  modules_path:
    type: string
    description: Path to modules directory in package.
    default: src
  executor:
    type: executor
    description: Override the version of Python.
    default: python-3-10
  configuration_file:
    type: string
    description: Path to pylint configuration file
    default: .pylintrc
  poetry-version:
    type: string
    description: Poetry version to install.
    default: 1.3.1
steps:
  - checkout
  - run:
      name: Install dependencies
      command: |
        pip uninstall poetry
        pip install poetry==<< parameters.poetry-version >>
        poetry install
  - run:
      name: Pylint
      command: |
        pip install pylint
        pylint --rcfile=<< parameters.configuration_file >> << parameters.modules_path >>